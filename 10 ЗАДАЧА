%предикат перестановки голов списков
%когда мы получили два списка, первый из которых с головой 1го нашего интересующего заменяемого элемента A,
%у второго соотсвтенно 2й элемент для замены B, мы переставляем головы спискам, тем самым выполняя главную
%операцию предиката
replaceelements(1,A,B,[B|L],[A|L]):- !.
%мы не достигли нужной головы у 2го списка, мы продолжаем отсекать ненужные первые элементы у 2го списка
replaceelements(Y,A,B,[C|L],[C|L1]):- Y1 is Y-1, replaceelements(Y1,A,B,L,L1).

%предикат перестановки элементов по индексам у списка
%если одинаковые позиции элементов, то и менять нечего
replace(X,X,L,L):- !.
%мы не достигли нужной головы у 1го списка, мы продолжаем отсекать ненужные первые элементы у 1го списка,
%попутно отсекая головы у 2го, чтобы в другом предикате мы меньше работали
replace(X,Y,[A|L],[A|L1]):- X>1, X<Y,!, X1 is X-1, Y1 is Y-1, replace(X1,Y1,L,L1).
%тот момент, когда получили 1й список с нужным элементом, но не получили 2й список со 2м элементом,
%мы переходим в предикат replaceelements, чтобы там привести 2й список к нужному виду и произвести там замену
replace(1,Y,[A|L],[B|L1]):- Y1 is Y-1, replaceelements(Y1,A,B,L,L1).
%если 1й индекс вдруг оказался больше 2го, то мы меняем их местами для дальнейшей работы
replace(X,Y,L,L1):- Y>0, replace(Y,X,L,L1).
